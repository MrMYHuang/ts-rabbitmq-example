version: '2'

networks:
  app:
    driver: bridge
    name: app

services:
  q1:
    image: 'rabbitmq'
    hostname: q1
    ports:
      - 8081:5671
      - 15672:15672
    networks:
      - app
    volumes:
      - ./config:/config
    environment:
      - RABBITMQ_ERLANG_COOKIE=ABC
      - RABBITMQ_CONFIG_FILE=/config/rabbitmq.conf
      - RABBITMQ_ADVANCED_CONFIG_FILE=/config/advanced.config
      - RABBITMQ_ENABLED_PLUGINS_FILE=/config/plugins.config
  q2:
    image: 'rabbitmq'
    hostname: q2
    ports:
      - 8082:5671
    networks:
      - app
    volumes:
      - ./config:/config
    environment:
      - RABBITMQ_ERLANG_COOKIE=ABC
      - RABBITMQ_CONFIG_FILE=/config/rabbitmq.conf
      - RABBITMQ_ADVANCED_CONFIG_FILE=/config/advanced.config
      - RABBITMQ_ENABLED_PLUGINS_FILE=/config/plugins.config
  q3:
    image: 'rabbitmq'
    hostname: q3
    ports:
      - 8083:5671
    networks:
      - app
    volumes:
      - ./config:/config
    environment:
      - RABBITMQ_ERLANG_COOKIE=ABC
      - RABBITMQ_CONFIG_FILE=/config/rabbitmq.conf
      - RABBITMQ_ADVANCED_CONFIG_FILE=/config/advanced.config
      - RABBITMQ_ENABLED_PLUGINS_FILE=/config/plugins.config
